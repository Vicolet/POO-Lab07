@startuml

' STATIC
' Generated by CTP - https://github.com/samuelroland/ctp

' Style
hide empty members
hide circle
skinparam classAttributeIconSize 0
skinparam linetype polyline

remove *Test*
remove Main

Negate -d- Divide
ClearError -d[hidden]- MemoryRecall
Subtract -d[hidden]- Sqrt
Divide -d[hidden]- Backspace
Negate -d[hidden]- Enter
ClearAll -d[hidden]- Inverse
Multiply -d[hidden]- DecimalPoint
MemoryStore -d[hidden]- DecimalPoint
Add -d[hidden]- Number
Add -d[hidden]- Square
MemoryStore -u[hidden]- Inverse


' Additions
Calculator "1"-u->"1" State: state


' REMOVE
' - state: State

' ENDSTATIC
class JCalculatorTest {
	- calculator: JCalculator
	- displayField: JTextField
	- stackDisplay: JList<String>
	+ setUp(): void
	- getStackContents(): String[]
	- clickButton(label: String): void
	+ testAdd(): void
	+ testBackspace(): void
	+ testClearAll(): void
	+ testClearError(): void
	+ testDecimalPoint(): void
	+ testDivide(): void
	+ testEnter(): void
	+ testInverse(): void
	+ testMemoryRecallAndStore(): void
	+ testMultiply(): void
	+ testNegate(): void
	+ testNumber(): void
	+ testSqrt(): void
	+ testSquare(): void
	+ testSubtract(): void
}


class Square {
	+ execute(state: State): void
}

class Inverse {
	+ execute(state: State): void
}

class Main {
	+ {static} main(args: String): void
}

class TestUtils {
	+ {static} getComponentByName(container: Container, name: String): Component
	+ {static} getButtonByLabel(container: Container, label: String): JButton
}

class Stack {
	- top: Node
	- size: int
	+ push(data: T): void
	+ pop(): T
	+ isEmpty(): boolean
	+ size(): int
	+ toString(): String
	+ toArray(): Object[]
	+ iterator(): Iterator<T>
}


class Stack$Node {
	~ data: T
	~ next: Node
}

class JCalculator {
	
	- jNumber: JTextField
	- jStack: JList<String>
	- constraints: GridBagConstraints
	- setupDisplay(): void
	- setupButtons(): void
	- setupStackDisplay(): void
	- addOperatorButton(name: String, x: int, y: int, color: Color, \n\t operator: Operator): void
	- update(): void
}


class CalculatorTest {
	- calculator: Calculator
	- outputStream: ByteArrayOutputStream
	+ setUp(): void
	- simulateInput(input: String): void
	- getConsoleOutput(): String
	+ testAddition(): void
	+ testSubtraction(): void
	+ testMultiplication(): void
	+ testDivision(): void
	+ testSquareRoot(): void
	+ testSquare(): void
	+ testNegate(): void
	+ testEnterPushesValueToStack(): void
	+ testMemoryStoreAndRecall(): void
	+ testClearAll(): void
	+ testDivisionByZero(): void
	+ testInvalidInput(): void
	+ testBackspace(): void
}


class Calculator {
	
	+ run(): void
	- processInput(input: String): void
	- displayState(): void
	+ {static} main(args: String[]): void
}


class Calculator$OperatorList {
	+ {static} createOperator(input: String, state: State): Operator
}

class Backspace {
	+ execute(state: State): void
}

class Multiply {
	+ execute(state: State): void
}

class ClearError {
	+ execute(state: State): void
}

abstract class Operator {
	+ {abstract}execute(state: State): void
}

class Add {
	+ execute(state: State): void
}

class Enter {
	+ execute(state: State): void
}

class Negate {
	+ execute(state: State): void
}

class StackTest {
	- stack: Stack<Integer>
	+ setUp(): void
	+ testPushAndToString(): void
	+ testPop(): void
	+ testToArray(): void
	+ testIterator(): void
	+ testIsEmpty(): void
	+ testSize(): void
	+ testPopFromEmptyStack(): void
}


class State {
	- stack: Stack<Double>
	- currentValue: Double
	- memory: Double
	- errorMessage: String
	- isDecimalMode: boolean
	- isNewEntry: boolean
	- isResultDisplayed: boolean
	- currentValueString: String
	+ getCurrentValue(): Double
	+ setCurrentValue(value: Double): void
	+ getCurrentValueAsString(): String
	+ setCurrentValueString(value: String): void
	+ pushCurrentValue(): void
	+ pop(): Double
	+ getStack(): Stack<Double>
	+ getStackArray(): String[]
	+ clearAll(): void
	+ storeInMemory(): void
	+ recallFromMemory(): Double
	+ setError(message: String): void
	+ getError(): String
	+ clearError(): void
	+ formatDouble(value: Double): String
	+ isDecimalMode(): boolean
	+ setDecimalMode(decimalMode: boolean): void
	+ isNewEntry(): boolean
	+ setNewEntry(newEntry: boolean): void
	+ isResultDisplayed(): boolean
	+ setResultDisplayed(resultDisplayed: boolean): void
}


class Divide {
	+ execute(state: State): void
}

class Subtract {
	+ execute(state: State): void
}

class MemoryRecall {
	+ execute(state: State): void
}

class Number {
	- digit: int
	+ execute(state: State): void
}


class DecimalPoint {
	+ execute(state: State): void
}

class MemoryStore {
	+ execute(state: State): void
}

class ClearAll {
	+ execute(state: State): void
}

class StateTest {
	
	+ setUp(): void
	+ testStackOperations(): void
	+ testCurrentValue(): void
	+ testMemoryOperations(): void
	+ testErrorHandling(): void
	+ testClearAll(): void
	+ testFlags(): void
	+ testStackToArray(): void
	+ testCurrentValueAsString(): void
}


class Sqrt {
	+ execute(state: State): void
}



Operator <|-- Square
Operator <|-- Inverse
Iterable <|.. Stack
Stack +-- Stack$Node
JFrame <|-- JCalculator
Calculator +-- Calculator$OperatorList
Operator <|-- Backspace
Operator <|-- Multiply
Operator <|-- ClearError
Operator <|-- Add
Operator <|-- Enter
Operator <|-- Negate
Operator <|-- Divide
Operator <|-- Subtract
Operator <|-- MemoryRecall
Operator <|-- Number
Operator <|-- DecimalPoint
Operator <|-- MemoryStore
Operator <|-- ClearAll
Operator <|-- Sqrt
@enduml
